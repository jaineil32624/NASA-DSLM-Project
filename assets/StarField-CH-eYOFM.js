import{r as d,j as J}from"./index-CKhaOQjt.js";function Q(){const O=d.useRef(null),p=d.useRef([]),x=d.useRef([]),S=d.useRef([]),w=d.useRef([]),C=d.useRef([]),I=d.useRef([]),$=d.useRef(),P=d.useRef(0),G=d.useRef(0),L=d.useRef(0),k=d.useRef({x:-1e3,y:-1e3}),W=d.useRef("dark");return d.useEffect(()=>{const l=O.current;if(!l)return;const t=l.getContext("2d");if(!t)return;const F=()=>{const a=document.documentElement.getAttribute("data-theme")||"dark";W.current=a},X=new MutationObserver(F);X.observe(document.documentElement,{attributes:!0,attributeFilter:["data-theme"]}),F();const T=()=>{l.width=window.innerWidth,l.height=window.innerHeight,j(),q()},q=()=>{S.current=[];const a=[{r:20,g:184,b:166},{r:6,g:182,b:212},{r:59,g:130,b:246},{r:16,g:185,b:129}];for(let h=0;h<5;h++)S.current.push({x:Math.random()*l.width,y:Math.random()*l.height,radius:Math.random()*200+100,color:a[Math.floor(Math.random()*a.length)],opacity:Math.random()*.06+.02,pulseSpeed:Math.random()*.001+5e-4,pulsePhase:Math.random()*Math.PI*2,driftX:(Math.random()-.5)*.15,driftY:(Math.random()-.5)*.15})},j=()=>{p.current=[];const a=Math.floor(l.width*l.height/1200),h=[{r:255,g:255,b:255},{r:255,g:255,b:255},{r:255,g:255,b:255},{r:200,g:220,b:255},{r:255,g:200,b:200},{r:200,g:255,b:220},{r:255,g:220,b:180},{r:180,g:220,b:255},{r:255,g:180,b:220},{r:180,g:255,b:220},{r:220,g:180,b:255},{r:255,g:255,b:180}];for(let e=0;e<a;e++){const n=Math.random()<.15?1:Math.random()<.4?2:3,o=Math.random()<.12,i=Math.random()<.005;p.current.push({x:Math.random()*l.width,y:Math.random()*l.height,size:n===1?Math.random()*3+2:n===2?Math.random()*2+1:Math.random()*1.2+.5,baseOpacity:Math.random()*.4+.5,twinkleSpeed:Math.random()*.006+.002,twinklePhase:Math.random()*Math.PI*2,layer:n,color:h[Math.floor(Math.random()*h.length)],pulseIntensity:Math.random()*.5+.3,sparkleTimer:Math.random()*500,isSparkle:o,isSupernovaCandidate:i})}},B=(a,h)=>{const e=[],n=Math.floor(Math.random()*8)+6;for(let o=0;o<n;o++)e.push({angle:Math.PI*2/n*o+Math.random()*.5,distance:0,size:Math.random()*2+1,opacity:1,speed:Math.random()*2.5+1});w.current.push({x:a,y:h,particles:e,life:0,maxLife:50})},H=(a,h)=>{const e=[{r:255,g:255,b:255},{r:255,g:200,b:100},{r:100,g:200,b:255},{r:255,g:150,b:200}];C.current.push({x:a,y:h,phase:0,maxPhase:120,maxRadius:Math.random()*80+60,color:e[Math.floor(Math.random()*e.length)]})},N=()=>{I.current.push({x:Math.random()*l.width,y:Math.random()*l.height,radius:0,maxRadius:Math.random()*400+300,opacity:.15,speed:Math.random()*2+1})},b=()=>{const a=Math.random()*l.width*.9,h=Math.random()*l.height*.4,e=[{r:255,g:255,b:255},{r:200,g:230,b:255},{r:255,g:220,b:180},{r:180,g:255,b:220}];x.current.push({x:a,y:h,length:Math.random()*120+80,speed:Math.random()*15+18,angle:Math.random()*Math.PI/6+Math.PI/5,opacity:1,trailParticles:[],color:e[Math.floor(Math.random()*e.length)]})},Y=a=>{k.current={x:a.clientX,y:a.clientY}},v=a=>{a.touches.length>0&&(k.current={x:a.touches[0].clientX,y:a.touches[0].clientY})};window.addEventListener("mousemove",Y),window.addEventListener("touchmove",v);const z=a=>{const h=W.current==="light";if(t.clearRect(0,0,l.width,l.height),h){S.current.forEach(e=>{const n=Math.sin(a*e.pulseSpeed+e.pulsePhase)*.5+.5,o=e.radius*(.85+n*.3),i=e.opacity*.25*(.7+n*.3),r=t.createRadialGradient(e.x,e.y,0,e.x,e.y,o);r.addColorStop(0,`rgba(${e.color.r}, ${e.color.g}, ${e.color.b}, ${i})`),r.addColorStop(.4,`rgba(${e.color.r}, ${e.color.g}, ${e.color.b}, ${i*.3})`),r.addColorStop(1,"rgba(255, 255, 255, 0)"),t.fillStyle=r,t.beginPath(),t.arc(e.x,e.y,o,0,Math.PI*2),t.fill(),e.x+=e.driftX,e.y+=e.driftY,e.x<-e.radius&&(e.x=l.width+e.radius),e.x>l.width+e.radius&&(e.x=-e.radius),e.y<-e.radius&&(e.y=l.height+e.radius),e.y>l.height+e.radius&&(e.y=-e.radius)}),p.current.forEach(e=>{e.sparkleTimer+=1;const o=Math.sin(a*e.twinkleSpeed+e.twinklePhase)*e.pulseIntensity*.5;let i=0;if(e.isSparkle&&e.sparkleTimer>100){const u=e.sparkleTimer%200/200;u<.3&&(i=Math.sin(u/.3*Math.PI)*.4),e.sparkleTimer>300&&(e.sparkleTimer=0)}const r=Math.min(.4,e.baseOpacity*.3*(.5+o*.5)+i),g=e.size*.7*(.85+o*.15+i*.3),m=e.layer===1?.02:e.layer===2?.01:.005;e.x+=m,e.x>l.width+10&&(e.x=-10);const c={r:Math.max(0,e.color.r-150),g:Math.max(0,e.color.g-150),b:Math.max(0,e.color.b-100)};if(e.layer===1||e.isSparkle&&i>.2){const u=g*3,s=t.createRadialGradient(e.x,e.y,0,e.x,e.y,u);s.addColorStop(0,`rgba(${c.r}, ${c.g}, ${c.b}, ${r*.5})`),s.addColorStop(.5,`rgba(${c.r}, ${c.g}, ${c.b}, ${r*.2})`),s.addColorStop(1,"rgba(100, 100, 100, 0)"),t.fillStyle=s,t.beginPath(),t.arc(e.x,e.y,u,0,Math.PI*2),t.fill()}t.fillStyle=`rgba(${c.r}, ${c.g}, ${c.b}, ${r})`,t.beginPath(),t.arc(e.x,e.y,g,0,Math.PI*2),t.fill()}),a-P.current>8e3+Math.random()*1e4&&(b(),P.current=a),x.current=x.current.filter(e=>{if(e.x+=Math.cos(e.angle)*e.speed,e.y+=Math.sin(e.angle)*e.speed,e.opacity-=.02,e.opacity<=0)return!1;const n=e.opacity*.4,o=t.createLinearGradient(e.x,e.y,e.x-Math.cos(e.angle)*e.length*.7,e.y-Math.sin(e.angle)*e.length*.7);return o.addColorStop(0,`rgba(100, 150, 180, ${n})`),o.addColorStop(.3,`rgba(80, 120, 150, ${n*.5})`),o.addColorStop(1,"rgba(60, 100, 130, 0)"),t.strokeStyle=o,t.lineWidth=2,t.lineCap="round",t.beginPath(),t.moveTo(e.x,e.y),t.lineTo(e.x-Math.cos(e.angle)*e.length*.7,e.y-Math.sin(e.angle)*e.length*.7),t.stroke(),t.fillStyle=`rgba(80, 130, 160, ${n})`,t.beginPath(),t.arc(e.x,e.y,3,0,Math.PI*2),t.fill(),!0}),$.current=requestAnimationFrame(z);return}if(I.current=I.current.filter(e=>(e.radius+=e.speed,e.opacity=.15*(1-e.radius/e.maxRadius),e.radius>=e.maxRadius?!1:(t.strokeStyle=`rgba(100, 200, 255, ${e.opacity})`,t.lineWidth=2,t.beginPath(),t.arc(e.x,e.y,e.radius,0,Math.PI*2),t.stroke(),!0))),S.current.forEach(e=>{const n=Math.sin(a*e.pulseSpeed+e.pulsePhase)*.5+.5,o=e.radius*(.85+n*.3),i=e.opacity*(.7+n*.3),r=t.createRadialGradient(e.x,e.y,0,e.x,e.y,o);r.addColorStop(0,`rgba(${e.color.r}, ${e.color.g}, ${e.color.b}, ${i})`),r.addColorStop(.4,`rgba(${e.color.r}, ${e.color.g}, ${e.color.b}, ${i*.4})`),r.addColorStop(1,"rgba(0, 0, 0, 0)"),t.fillStyle=r,t.beginPath(),t.arc(e.x,e.y,o,0,Math.PI*2),t.fill(),e.x+=e.driftX,e.y+=e.driftY,e.x<-e.radius&&(e.x=l.width+e.radius),e.x>l.width+e.radius&&(e.x=-e.radius),e.y<-e.radius&&(e.y=l.height+e.radius),e.y>l.height+e.radius&&(e.y=-e.radius)}),p.current.forEach(e=>{e.sparkleTimer+=1;const n=Math.sin(a*e.twinkleSpeed+e.twinklePhase),o=Math.sin(a*e.twinkleSpeed*1.5+e.twinklePhase*.7),i=(n*.6+o*.4)*e.pulseIntensity;let r=0;if(e.isSparkle&&e.sparkleTimer>100){const f=e.sparkleTimer%200/200;f<.3&&(r=Math.sin(f/.3*Math.PI)*.8),e.sparkleTimer>300&&(e.sparkleTimer=0)}const g=Math.min(1,e.baseOpacity*(.5+i*.5)+r),m=e.size*(.85+i*.15+r*.4),c=e.x-k.current.x,u=e.y-k.current.y,s=Math.sqrt(c*c+u*u),A=120;let E=0;s<A&&(E=(1-s/A)*.5);const D=e.layer===1?.02:e.layer===2?.01:.005;e.x+=D,e.x>l.width+10&&(e.x=-10);const y=Math.min(1,g+E),R=m*(1+E*.5);if(e.layer===1||e.isSparkle&&r>.3){const f=R*4,M=t.createRadialGradient(e.x,e.y,0,e.x,e.y,f);M.addColorStop(0,`rgba(${e.color.r}, ${e.color.g}, ${e.color.b}, ${y*.8})`),M.addColorStop(.3,`rgba(${e.color.r}, ${e.color.g}, ${e.color.b}, ${y*.4})`),M.addColorStop(.6,`rgba(${e.color.r}, ${e.color.g}, ${e.color.b}, ${y*.15})`),M.addColorStop(1,"rgba(0, 0, 0, 0)"),t.fillStyle=M,t.beginPath(),t.arc(e.x,e.y,f,0,Math.PI*2),t.fill()}if(e.layer===1&&y>.7){const f=R*6,M=y*.3;t.strokeStyle=`rgba(${e.color.r}, ${e.color.g}, ${e.color.b}, ${M})`,t.lineWidth=1,t.beginPath(),t.moveTo(e.x-f,e.y),t.lineTo(e.x+f,e.y),t.moveTo(e.x,e.y-f),t.lineTo(e.x,e.y+f),t.stroke()}t.fillStyle=`rgba(${e.color.r}, ${e.color.g}, ${e.color.b}, ${y})`,t.beginPath(),t.arc(e.x,e.y,R,0,Math.PI*2),t.fill(),e.layer===1&&(t.fillStyle=`rgba(255, 255, 255, ${y*.8})`,t.beginPath(),t.arc(e.x,e.y,R*.4,0,Math.PI*2),t.fill())}),a-P.current>2500+Math.random()*4e3&&(b(),Math.random()<.3&&setTimeout(()=>b(),200),Math.random()<.15&&setTimeout(()=>b(),400),P.current=a),a-G.current>15e3+Math.random()*2e4){const e=p.current.find(n=>n.isSupernovaCandidate&&n.layer===1);e&&(H(e.x,e.y),e.isSupernovaCandidate=!1),G.current=a}a-L.current>8e3+Math.random()*1e4&&(N(),L.current=a),C.current=C.current.filter(e=>{e.phase+=1;const n=e.phase/e.maxPhase;if(n>=1)return!1;let o,i;n<.3?(o=e.maxRadius*(n/.3),i=n/.3):n<.5?(o=e.maxRadius,i=1):(o=e.maxRadius*(1+(n-.5)*.5),i=1-(n-.5)/.5);const r=t.createRadialGradient(e.x,e.y,0,e.x,e.y,o);if(r.addColorStop(0,`rgba(255, 255, 255, ${i})`),r.addColorStop(.2,`rgba(${e.color.r}, ${e.color.g}, ${e.color.b}, ${i*.8})`),r.addColorStop(.5,`rgba(${e.color.r}, ${e.color.g}, ${e.color.b}, ${i*.3})`),r.addColorStop(1,"rgba(0, 0, 0, 0)"),t.fillStyle=r,t.beginPath(),t.arc(e.x,e.y,o,0,Math.PI*2),t.fill(),n<.6){const g=n<.3?n/.3:(.6-n)/.3;t.fillStyle=`rgba(255, 255, 255, ${g})`,t.beginPath(),t.arc(e.x,e.y,o*.15,0,Math.PI*2),t.fill()}if(n<.5){const g=n<.3?n/.3:(.5-n)/.2,m=o*1.5;t.strokeStyle=`rgba(255, 255, 255, ${g*.5})`,t.lineWidth=2;for(let c=0;c<8;c++){const u=Math.PI*2/8*c+n*Math.PI;t.beginPath(),t.moveTo(e.x,e.y),t.lineTo(e.x+Math.cos(u)*m,e.y+Math.sin(u)*m),t.stroke()}}return!0}),w.current=w.current.filter(e=>{e.life+=1;const n=e.life/e.maxLife;return n>=1?!1:(e.particles.forEach(o=>{o.distance+=o.speed,o.opacity=(1-n)*.8;const i=e.x+Math.cos(o.angle)*o.distance,r=e.y+Math.sin(o.angle)*o.distance,g=t.createRadialGradient(i,r,0,i,r,o.size*3);g.addColorStop(0,`rgba(255, 255, 255, ${o.opacity})`),g.addColorStop(.5,`rgba(200, 230, 255, ${o.opacity*.5})`),g.addColorStop(1,"rgba(100, 180, 255, 0)"),t.fillStyle=g,t.beginPath(),t.arc(i,r,o.size*3,0,Math.PI*2),t.fill(),t.fillStyle=`rgba(255, 255, 255, ${o.opacity})`,t.beginPath(),t.arc(i,r,o.size,0,Math.PI*2),t.fill()}),!0)}),x.current=x.current.filter(e=>{if(e.x+=Math.cos(e.angle)*e.speed,e.y+=Math.sin(e.angle)*e.speed,e.opacity-=.015,Math.random()<.7&&e.trailParticles.push({x:e.x+(Math.random()-.5)*3,y:e.y+(Math.random()-.5)*3,opacity:e.opacity*.7,size:Math.random()*2+.5}),e.trailParticles=e.trailParticles.filter(i=>(i.opacity-=.03,i.opacity<=0?!1:(t.fillStyle=`rgba(${e.color.r}, ${e.color.g}, ${e.color.b}, ${i.opacity})`,t.beginPath(),t.arc(i.x,i.y,i.size,0,Math.PI*2),t.fill(),!0))),e.opacity<=0)return!1;const n=t.createLinearGradient(e.x,e.y,e.x-Math.cos(e.angle)*e.length,e.y-Math.sin(e.angle)*e.length);n.addColorStop(0,`rgba(255, 255, 255, ${e.opacity})`),n.addColorStop(.2,`rgba(${e.color.r}, ${e.color.g}, ${e.color.b}, ${e.opacity*.7})`),n.addColorStop(1,`rgba(${e.color.r}, ${e.color.g}, ${e.color.b}, 0)`),t.strokeStyle=n,t.lineWidth=3,t.lineCap="round",t.beginPath(),t.moveTo(e.x,e.y),t.lineTo(e.x-Math.cos(e.angle)*e.length,e.y-Math.sin(e.angle)*e.length),t.stroke();const o=t.createRadialGradient(e.x,e.y,0,e.x,e.y,12);return o.addColorStop(0,`rgba(255, 255, 255, ${e.opacity})`),o.addColorStop(.3,`rgba(${e.color.r}, ${e.color.g}, ${e.color.b}, ${e.opacity*.6})`),o.addColorStop(1,"rgba(100, 180, 255, 0)"),t.fillStyle=o,t.beginPath(),t.arc(e.x,e.y,12,0,Math.PI*2),t.fill(),t.fillStyle=`rgba(255, 255, 255, ${e.opacity})`,t.beginPath(),t.arc(e.x,e.y,4,0,Math.PI*2),t.fill(),!0}),Math.random()<.008&&B(Math.random()*l.width,Math.random()*l.height),$.current=requestAnimationFrame(z)};return T(),window.addEventListener("resize",T),$.current=requestAnimationFrame(z),()=>{window.removeEventListener("resize",T),window.removeEventListener("mousemove",Y),window.removeEventListener("touchmove",v),X.disconnect(),$.current&&cancelAnimationFrame($.current)}},[]),J.jsx("canvas",{ref:O,className:"fixed inset-0 pointer-events-none z-0 transition-opacity duration-500",style:{background:"transparent"}})}export{Q as S};
//# sourceMappingURL=StarField-CH-eYOFM.js.map
